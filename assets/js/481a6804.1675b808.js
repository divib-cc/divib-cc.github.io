"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5295],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var p=r.createContext({}),s=function(e){var t=r.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},d="mdxType",i={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,p=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=s(a),m=n,k=d["".concat(p,".").concat(m)]||d[m]||i[m]||l;return a?r.createElement(k,o(o({ref:t},u),{},{components:a})):r.createElement(k,o({ref:t},u))}));function k(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,o=new Array(l);o[0]=m;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c[d]="string"==typeof e?e:n,o[1]=c;for(var s=2;s<l;s++)o[s]=a[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},4855:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>c,toc:()=>s});var r=a(7462),n=(a(7294),a(3905));const l={},o=void 0,c={unversionedId:"CABAL/CABAL_EP8_Docker",id:"CABAL/CABAL_EP8_Docker",title:"CABAL_EP8_Docker",description:"1. \u5b89\u88c5 docker \u548c git",source:"@site/docs/CABAL/CABAL_EP8_Docker.md",sourceDirName:"CABAL",slug:"/CABAL/CABAL_EP8_Docker",permalink:"/docs/CABAL/CABAL_EP8_Docker",draft:!1,editUrl:"https://github.com/divib-cc/divib-cc.github.io/docs/CABAL/CABAL_EP8_Docker.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"cabalmain_1288_\u5730\u5740",permalink:"/docs/CABAL/CABAL_EP2_1288\u4e3b\u7a0b\u5e8f\u5730\u5740"},next:{title:"CABAL\u6570\u636e\u5e93\u64cd\u4f5c\u4ee3\u7801",permalink:"/docs/CABAL/CABAL\u6570\u636e\u5e93\u64cd\u4f5c\u4ee3\u7801"}},p={},s=[{value:"1. \u5b89\u88c5 docker \u548c git",id:"1-\u5b89\u88c5-docker-\u548c-git",level:3},{value:"2. \u83b7\u53d6\u9879\u76ee",id:"2-\u83b7\u53d6\u9879\u76ee",level:3},{value:"3. \u8fdb\u5165\u76ee\u5f55",id:"3-\u8fdb\u5165\u76ee\u5f55",level:3},{value:"4. \u590d\u5236.env.example \u4e3a.env",id:"4-\u590d\u5236envexample-\u4e3aenv",level:3},{value:"5. \u67e5\u770b\u83b7\u53d6\u670d\u52a1\u5668 IP \u5730\u5740",id:"5-\u67e5\u770b\u83b7\u53d6\u670d\u52a1\u5668-ip-\u5730\u5740",level:3},{value:"6. \u7f16\u8f91 .env \u6587\u4ef6",id:"6-\u7f16\u8f91-env-\u6587\u4ef6",level:3},{value:"7. \u6784\u5efa docker \u5bb9\u5668",id:"7-\u6784\u5efa-docker-\u5bb9\u5668",level:3},{value:"8. \u542f\u52a8 mssql \u6570\u636e\u5e93\u5bb9\u5668",id:"8-\u542f\u52a8-mssql-\u6570\u636e\u5e93\u5bb9\u5668",level:3},{value:"9. \u8fd8\u539f\u6570\u636e\u5e93",id:"9-\u8fd8\u539f\u6570\u636e\u5e93",level:3},{value:"10. \u542f\u52a8\u6570\u636e\u5e93\u4ee3\u7406",id:"10-\u542f\u52a8\u6570\u636e\u5e93\u4ee3\u7406",level:3},{value:"11. Up Global Mgr \u670d\u52a1\u5668",id:"11-up-global-mgr-\u670d\u52a1\u5668",level:3},{value:"12. Up \u5176\u4ed6\u670d\u52a1",id:"12-up-\u5176\u4ed6\u670d\u52a1",level:3},{value:"13. \u542f\u52a8\u9891\u9053",id:"13-\u542f\u52a8\u9891\u9053",level:3},{value:"Service status",id:"service-status",level:3},{value:"Service logs",id:"service-logs",level:3}],u={toc:s};function d(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h3",{id:"1-\u5b89\u88c5-docker-\u548c-git"},"1. \u5b89\u88c5 docker \u548c git"),(0,n.kt)("blockquote",null,(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Ubuntu/Debian\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801")),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"apt update && apt install git docker-compose\n")),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"RedHat/CentOS/Fedora\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801")),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum update && yum install git docker-compose\n"))),(0,n.kt)("h3",{id:"2-\u83b7\u53d6\u9879\u76ee"},"2. \u83b7\u53d6\u9879\u76ee"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/artem-alekseev/cabal_server.git\n")),(0,n.kt)("h3",{id:"3-\u8fdb\u5165\u76ee\u5f55"},"3. \u8fdb\u5165\u76ee\u5f55"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cd cabal_server/\n")),(0,n.kt)("h3",{id:"4-\u590d\u5236envexample-\u4e3aenv"},"4. \u590d\u5236.env.example \u4e3a.env"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cp .env.example .env\n")),(0,n.kt)("h3",{id:"5-\u67e5\u770b\u83b7\u53d6\u670d\u52a1\u5668-ip-\u5730\u5740"},"5. \u67e5\u770b\u83b7\u53d6\u670d\u52a1\u5668 IP \u5730\u5740"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"ip addr\n")),(0,n.kt)("h3",{id:"6-\u7f16\u8f91-env-\u6587\u4ef6"},"6. \u7f16\u8f91 .env \u6587\u4ef6"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-js"},"DB_PASSWORD=password_from_db //\u6570\u636e\u5e93\u5bc6\u7801\u4f7f\u7528\u7279\u6b8a\u7b26\u53f7\u3001\u6570\u5b57\u548c\u5927\u5199\u7b26\u53f7\u7684\u5f3a\u5bc6\u7801\nCONNECT_IP=192.168.1.1 // \u670d\u52a1\u5668IP\nEXP_RATE=100 // \u5347\u7ea7\u7ecf\u9a8c\uff08\u4f8b\u5982 5 \u8868\u793a 5 \u500d\uff09\nSEXP_RATE=100 // \u6280\u80fd\u7ecf\u9a8c\nCEXP_RATE=100 // \u5236\u9020\u7ecf\u9a8c\nDROP_RATE=2 // \u6389\u843d\u7387\uff08\u8d85\u8fc7 5 \u4e0d\u597d\uff09\nALZ_RATE=100 // \u91d1\u5e01 \u6389\u843d\u7387\nBALZ_RATE=100 // \u91d1\u5e01\u5806 \u6389\u843d\u7387\nPEXP_RATE=100 // \u5ba0\u7269\u7ecf\u9a8c\nWEXP_RATE=100 // \u6218\u4e89\u7ecf\u9a8c\nITEMS_PER_DROP=2 // \u7269\u54c1\u6389\u843d\u6570\u91cf\n")),(0,n.kt)("h3",{id:"7-\u6784\u5efa-docker-\u5bb9\u5668"},"7. \u6784\u5efa docker \u5bb9\u5668"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose build\n")),(0,n.kt)("h3",{id:"8-\u542f\u52a8-mssql-\u6570\u636e\u5e93\u5bb9\u5668"},"8. \u542f\u52a8 mssql \u6570\u636e\u5e93\u5bb9\u5668"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d mssql\n")),(0,n.kt)("h3",{id:"9-\u8fd8\u539f\u6570\u636e\u5e93"},"9. \u8fd8\u539f\u6570\u636e\u5e93"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose exec mssql sh restoredb.sh\n")),(0,n.kt)("h3",{id:"10-\u542f\u52a8\u6570\u636e\u5e93\u4ee3\u7406"},"10. \u542f\u52a8\u6570\u636e\u5e93\u4ee3\u7406"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d global_db_agent auth_db_agent cash_db_agent event_db_agent pc_bang_db_agent db_agent_01 rock_and_roll_its\n")),(0,n.kt)("h3",{id:"11-up-global-mgr-\u670d\u52a1\u5668"},"11. Up Global Mgr \u670d\u52a1\u5668"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d global_mgr_svr\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u7b49\u5f85 30 \u79d2\u5de6\u53f3")),(0,n.kt)("h3",{id:"12-up-\u5176\u4ed6\u670d\u52a1"},"12. Up \u5176\u4ed6\u670d\u52a1"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d party_svr_01 chat_node_01 event_mgr_svr login_svr_01 agent_shop_01\n")),(0,n.kt)("h3",{id:"13-\u542f\u52a8\u9891\u9053"},"13. \u542f\u52a8\u9891\u9053"),(0,n.kt)("blockquote",null,(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Premium")),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d world_svr_01_01\n")),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"War")),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d world_svr_01_02\n")),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"M War")),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose up -d world_svr_01_03 world_svr_01_04 world_svr_01_05 world_svr_01_06 world_svr_01_07\n")),(0,n.kt)("h3",{parentName:"blockquote",id:"stop-server"},"Stop server"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose down\n"))),(0,n.kt)("h3",{id:"service-status"},"Service status"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose ps\n")),(0,n.kt)("h3",{id:"service-logs"},"Service logs"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs container_name\n")),(0,n.kt)("p",null,"example"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose logs global_mgr_svr\n")))}d.isMDXComponent=!0}}]);